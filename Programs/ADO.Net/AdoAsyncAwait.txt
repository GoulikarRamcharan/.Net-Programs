With the advent of modern, scalable applications, asynchronous programming is crucial to avoid blocking operations and improve performance. ADO.NET provides asynchronous methods to execute queries and commands, enhancing application responsiveness.


using System;
using System.Data.SqlClient;
using System.Threading.Tasks;

public class AdoNetAsyncExample
{
    public static async Task Main(string[] args)
    {
        string connectionString = "Data Source=(local);Initial Catalog=Northwind;Integrated Security=SSPI";
        string query = "SELECT OrderID, CustomerID FROM dbo.Orders;";

        await ExecuteAsyncCommand(connectionString, query);

        Console.WriteLine("Press any key to exit.");
        Console.ReadKey();
    }

    private static async Task ExecuteAsyncCommand(string connectionString, string query)
    {
        using (SqlConnection connection = new SqlConnection(connectionString))
        {
            SqlCommand command = new SqlCommand(query, connection);

            try
            {
                await connection.OpenAsync(); // Asynchronously open the connection
                Console.WriteLine("Connection opened asynchronously.");

                using (SqlDataReader reader = await command.ExecuteReaderAsync()) // Asynchronously execute the reader
                {
                    Console.WriteLine("Command executed asynchronously. Reading data:");
                    while (await reader.ReadAsync()) // Asynchronously read data
                    {
                        Console.WriteLine($"OrderID: {reader["OrderID"]}, CustomerID: {reader["CustomerID"]}");
                    }
                }
            }
            catch (Exception ex)
            {
                Console.WriteLine($"An error occurred: {ex.Message}");
            }
            finally
            {
                if (connection.State == System.Data.ConnectionState.Open)
                {
                    connection.Close(); // Close the connection if it's still open
                    Console.WriteLine("Connection closed.");
                }
            }
        }
    }
}

------------------------------------------------------------------------



Asynchronous Command Execution
SqlCommand command = new SqlCommand("SELECT * FROM MyTable", connection);
await connection.OpenAsync();
SqlDataReader reader = await command.ExecuteReaderAsync();
while (await reader.ReadAsync())
{
    // Process data
}
await reader.CloseAsync();